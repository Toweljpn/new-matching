# Webアプリケーション仕様書：わが子のための、ものがたり診断

## 1. 概要

本アプリケーションは、ユーザーがいくつかの質問に答えることで、自身のライフスタイルや価値観に合った節句人形（雛人形・五月人形）のスタイル診断を受けられるWebサイトである。診断結果では、おすすめのスタイル、具体的な商品カテゴリ、専門家からのアドバイスが表示され、ユーザーの商品選択をサポートすることを目的とする。

## 2. 画面仕様

本アプリケーションは、大きく分けて「診断画面」と「結果画面」の2つの画面で構成される。

### 2.1. 診断画面 (`#quiz-container`)

ユーザーが質問に回答するためのインターフェース。

- **質問タイトル (`#question-title`)**: 現在の質問内容を表示する。
- **選択肢コンテナ (`#options-container`)**:
    - 質問に対する選択肢がボタン形式 (`.option-btn`) で複数表示される。
    - 2問目以降は、上記の選択肢に加えて「ひとつ前の質問に戻る」ボタン (`.back-option-btn`) が表示される。

### 2.2. 結果画面 (`#result-container`)

診断が完了したユーザーに結果を提示する画面。初期状態では非表示。

- **診断結果タイトル (`#result-style-title`)**: 診断されたスタイルの名称（例：「リビングに映える本格派、匠の技が光る伝統美のおひなさま」）を表示する。
- **診断結果メッセージ (`#result-message`)**: 診断結果の詳細な説明文を表示する。
- **おすすめセット (`#recommended-categories-container`)**:
    - 診断結果に基づいた具体的な商品カテゴリを2つ提示する。
    - 各カテゴリは商品画像 (`.category-item img`) とカテゴリ名 (`.category-item p`) で構成される。
- **アドバイザーからのヒント (`#designer-message`)**: 節句人形アドバイザーからの、商品選びに関するワンポイントアドバイスを表示する。
- **CTAセクション (`#cta-section`)**: ユーザーの次の行動を促すボタン群。
    - **メインCTA (`#save-result-btn`)**: 「この診断結果を保存して店舗へ行く」
    - **サブCTA (`#sub-cta-buttons`)**:
        - 「オンラインストアで関連商品を探してみる」 (`#explore-btn`)
        - 「診断結果を友達にシェア」 (`#share-btn`)
    - **リスタートボタン (`#restart-btn`)**: 「診断をやり直す」

## 3. 機能仕様

### 3.1. 診断フロー

1.  アプリケーションが読み込まれると、1問目の質問が自動的に表示される。
2.  ユーザーがいずれかの選択肢ボタンをクリックすると、その回答が内部的に保存され、次の質問が表示される。
3.  2問目以降では「ひとつ前の質問に戻る」ボタンが表示され、クリックすると一つ前の質問に戻ることができる。
4.  最後の質問（5問目）に回答すると、診断が完了し、結果画面が表示される。

### 3.2. 質問項目

診断は以下の5つの質問で構成される。

- Q1: 節句の種類（桃の節句 / 端午の節句）
- Q2: 飾り場所のイメージ（コンパクト / スタンダード / 省スペース）
- Q3: デザインの好み（伝統美 / モダン / かわいい）
- Q4: 重視する想い（格式 / デザイン性 / バランス）
- Q5: 予算規模（任意）

### 3.3. 結果ロジック

- Q1からQ4までの4つの回答の組み合わせ (`q1_q2_q3_q4`) をキーとして、`script.js`内の`resultsData`オブジェクトから対応する診断結果を検索する。
- 組み合わせのパターンは `2 * 3 * 3 * 3 = 54` 通り存在する。
- 万が一、該当するキーが存在しない場合は、デフォルトの診断結果 (`default`) が表示される。
- Q5（予算）の回答は、診断結果の特定には使用されない。

### 3.4. ボタン操作

- **選択肢ボタン (`.option-btn`)**: クリックすると回答を記録し、次の質問へ進む。
- **戻るボタン (`.back-option-btn`)**: クリックすると一つ前の質問に戻る。
- **やり直しボタン (`#restart-btn`)**: クリックすると、すべての回答履歴がリセットされ、診断画面の1問目から再スタートする。
- その他のCTAボタン（保存、オンラインストア、シェア）には、現状具体的な機能は実装されていない。

## 4. デザイン仕様

### 4.1. テーマ

- 「高級感」と「清潔感」をテーマとし、信頼性と専門性を演出する。

### 4.2. レイアウト

- 全体を中央に配置した、最大幅800pxのシングルカラムレイアウト。
- レスポンシブ対応が施されており、スマートフォンなどの狭い画面でも表示が最適化される。

### 4.3. 色彩

- **ベースカラー**: `#f8f9fa` (背景), `#ffffff` (コンテナ)
- **テキストカラー**: `#343a40` (基本), `#555` (補足)
- **アクセントカラー**: `#0056b3` (見出し、ホバーエフェクト)
- **CTAカラー**: `#28a745` (保存ボタン), `#007bff` (サブボタン)

### 4.4. タイポグラフィ

- **見出し**: セリフ体 (`Georgia`, `Yu Mincho`など) を使用し、格調高さを表現。
- **本文**: サンセリフ体 (`Helvetica Neue`, `Hiragino Sans`など) を使用し、可読性を確保。

## 5. データ構造

`script.js`内に定義されたデータ構造。

### 5.1. 質問データ (`questions` 配列)

各質問をオブジェクトとして格納した配列。

```javascript
{
    id: 'q1', // 質問ID
    title: 'Q1: お祝いの節句は？', // 質問タイトル
    options: [ // 選択肢の配列
        { text: '桃の節句（ひな人形）', value: 'hina' },
        { text: '端午の節句（五月人形）', value: 'gogatsu' }
    ]
}
```

### 5.2. 結果データ (`resultsData` オブジェクト)

回答の組み合わせをキーとし、診断結果を値とするオブジェクト。

```javascript
'hina_compact_natural_elegant_function': {
    style: 'リビングに映える本格派、匠の技が光る伝統美のおひなさま ', // 結果タイトル
    message: 'コンパクトさを求めつつも...', // 結果メッセージ
    categories: [ // おすすめカテゴリの配列
        { name: '匠の技（ひな）', img: './images/001-1.webp' },
        { name: '本物志向（ひな）', img: './images/001-2.webp' }
    ],
    advice: '名匠の作には、木製の道具を合わせるとより格調高くなります。 ' // アドバイス
}
```